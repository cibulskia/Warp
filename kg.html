<!doctype html>
<html lang="sr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CSV prikaz sa inputom i dugmetom</title>
  <script src="https://unpkg.com/papaparse@5.4.1/papaparse.min.js" defer></script>
  <style>
    body { 
      font-family: Arial, sans-serif;
      padding: 20px; 
      background-color: #f4f4f4; 
      margin: 0;
      display: flex;
      justify-content: center;
    }

    .container {
      width: 100%;
      max-width: 1200px;
      background-color: #fff;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    h1 {
      text-align: center;
      color: #333;
      margin-bottom: 30px;
    }

    #grid { 
      display: grid; 
      grid-template-columns: repeat(7, 1fr); /* 5 kolona + input + dugme */
      gap: 12px; 
      align-items: center;
    }

    .cell, .input-cell, .button-cell { 
      background-color: #f8f9fa; 
      padding: 12px;
      border-radius: 8px;
      word-break: break-word; 
      border: 1px solid #ddd;
      box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
    }

    .cell {
      font-size: 14px;
      color: #333;
    }

    .input-cell input {
      width: 100%;
      padding: 8px;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 14px;
      box-sizing: border-box;
    }

    .button-cell button {
      width: 100%;
      padding: 8px;
      border-radius: 6px;
      border: none;
      background-color: #007bff;
      color: white;
      font-size: 14px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    .button-cell button:hover {
      background-color: #0056b3;
    }

    @media (max-width: 900px) {
      #grid { grid-template-columns: repeat(1, 1fr); }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>CSV Prikaz sa Inputom i Dugmetom</h1>
    <div id="grid"></div>
  </div>

  <script>
    const CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vToqj0JglDOwG_PdfpqiBTA76JnJO9AY38FNnpudB_YevYjhriY6oZbthJeUfqbkPbOdDxf8Aa4R9__/pub?gid=151805995&single=true&output=csv";
    const gridEl = document.getElementById('grid');

    async function loadCSV() {
      try {
        const res = await fetch(CSV_URL, { cache: "no-store" });
        const text = await res.text();
        const parsed = Papa.parse(text, { skipEmptyLines: true });
        const rows = parsed.data;

        const fragment = document.createDocumentFragment();

        for (const row of rows) {
          // 5 kolona iz CSV-a
          for (const cell of row) {
            const div = document.createElement('div');
            div.className = 'cell';
            div.textContent = cell;
            fragment.appendChild(div);
          }

          // polje za unos
          const inputDiv = document.createElement('div');
          inputDiv.className = 'input-cell';
          const input = document.createElement('input');
          input.type = 'text';
          input.placeholder = 'Unesi tekst...';
          inputDiv.appendChild(input);
          fragment.appendChild(inputDiv);

          // dugme
          const buttonDiv = document.createElement('div');
          buttonDiv.className = 'button-cell';
          const button = document.createElement('button');
          button.textContent = 'Potvrdi';
          button.addEventListener('click', () => {
            alert(`Red: ${row.join(', ')}\nUneto: ${input.value}`);
          });
          buttonDiv.appendChild(button);
          fragment.appendChild(buttonDiv);
        }

        gridEl.appendChild(fragment);
      } catch (error) {
        console.error("Greška pri učitavanju CSV-a:", error);
      }
    }

    window.addEventListener('load', loadCSV);
  </script>
</body>
</html>
