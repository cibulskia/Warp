<!doctype html>
<html lang="sr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CSV prikaz sa inputom i dugmetom</title>
  <script src="https://unpkg.com/papaparse@5.4.1/papaparse.min.js" defer></script>
  <style>
    body { 
      font-family: sans-serif; 
      padding:20px; 
      background:#0f172a; 
      color:#e6eef8; 
    }
    #grid { 
      display: grid; 
      grid-template-columns: repeat(7, 1fr); /* 5 kolona + input + dugme */
      gap:10px; 
      align-items: center;
    }
    .cell, .input-cell, .button-cell { 
      background:#1e293b; 
      padding:10px; 
      border-radius:6px; 
      word-break: break-word; 
    }
    .input-cell input {
      width: 100%;
      padding: 5px;
      border-radius: 4px;
      border: none;
      background: #0f172a;
      color: #e6eef8;
    }
    .button-cell button {
      width: 100%;
      padding: 5px;
      border-radius: 4px;
      border: none;
      background: #3b82f6;
      color: white;
      cursor: pointer;
    }
    .button-cell button:hover {
      background: #2563eb;
    }
  </style>
</head>
<body>
  <div id="grid"></div>

  <script>
    const CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vToqj0JglDOwG_PdfpqiBTA76JnJO9AY38FNnpudB_YevYjhriY6oZbthJeUfqbkPbOdDxf8Aa4R9__/pub?gid=151805995&single=true&output=csv";
    const gridEl = document.getElementById('grid');

    async function loadCSV() {
      const res = await fetch(CSV_URL, { cache: "no-store" });
      const text = await res.text();
      const parsed = Papa.parse(text, { skipEmptyLines: true });
      const rows = parsed.data;

      const fragment = document.createDocumentFragment();

      for (const row of rows) {
        // 5 kolona iz CSV-a
        for (const cell of row) {
          const div = document.createElement('div');
          div.className = 'cell';
          div.textContent = cell;
          fragment.appendChild(div);
        }

        // polje za unos
        const inputDiv = document.createElement('div');
        inputDiv.className = 'input-cell';
        const input = document.createElement('input');
        input.type = 'text';
        input.placeholder = 'Unesi tekst...';
        inputDiv.appendChild(input);
        fragment.appendChild(inputDiv);

        // dugme
        const buttonDiv = document.createElement('div');
        buttonDiv.className = 'button-cell';
        const button = document.createElement('button');
        button.textContent = 'Potvrdi';
        button.addEventListener('click', () => {
          alert(`Red: ${row.join(', ')}\nUneto: ${input.value}`);
        });
        buttonDiv.appendChild(button);
        fragment.appendChild(buttonDiv);
      }

      gridEl.appendChild(fragment);
    }

    window.addEventListener('load', loadCSV);
  </script>
</body>
</html>
