<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Lista sa YouTube i Google Sheets</title>
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            display: flex;
            height: 100vh;
        }
        .sidebar {
            width: 300px;
            overflow-y: auto;
            border-right: 1px solid #ccc;
            padding: 10px;
            box-sizing: border-box;
        }
        .video-item {
            cursor: pointer;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        .video-item img {
            width: 80px;
            height: 45px;
            object-fit: cover;
            margin-right: 10px;
        }
        .video-item span {
            font-size: 14px;
        }
        .main {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            background: #f4f4f4;
        }
    </style>
</head>
<body>
    <div class="sidebar" id="video-list">
        <!-- Lista video klipova Ä‡e se ubacivati ovde -->
    </div>
    <div class="main" id="main-section">
        <!-- Centralna sekcija je prazna za sada -->
    </div>

    <script>
        const sheetUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vToqj0JglDOwG_PdfpqiBTA76JnJO9AY38FNnpudB_YevYjhriY6oZbthJeUfqbkPbOdDxf8Aa4R9__/pub?gid=1440834607&single=true&output=csv';

        async function loadVideos() {
            const response = await fetch(sheetUrl);
            const csvText = await response.text();
            const lines = csvText.trim().split('\n');
            const videoList = document.getElementById('video-list');

            // Obrnuti redosled: od poslednjeg ka prvom
            lines.reverse().forEach(line => {
                const videoId = line.trim();
                if (!videoId) return;

                const videoItem = document.createElement('div');
                videoItem.className = 'video-item';
                
                const thumbnail = document.createElement('img');
                thumbnail.src = `https://img.youtube.com/vi/${videoId}/mqdefault.jpg`;
                thumbnail.alt = 'Video thumbnail';

                const title = document.createElement('span');
                title.textContent = videoId; // za sada ID kao naslov

                videoItem.appendChild(thumbnail);
                videoItem.appendChild(title);

                videoItem.addEventListener('click', () => {
                    const mainSection = document.getElementById('main-section');
                    mainSection.innerHTML = `
                        <iframe width="560" height="315" 
                        src="https://www.youtube.com/embed/${videoId}?controls=0" 
                        title="YouTube video player" frameborder="0" 
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                        referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
                    `;
                });

                videoList.appendChild(videoItem);
            });
        }

        loadVideos();
    </script>
</body>
</html>

